<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang='zh-CN'>
	<head>
		<title>谷歌搜索的敏感词有哪些 </title>
		<meta charset="utf-8">
		<META NAME="Description" CONTENT="通过源码找出谷歌搜索的敏感词">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://xie-yu.github.com/xie-yu.xml" />
		<link rel="stylesheet" type="text/css" href="../../css/global.css" />
		<link rel="stylesheet" type="text/css" href="../../css/simple-highlight/simple-highlight.css" />
		<script type="text/javascript" src="../../js/jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="../../js/global.js"></script>
		<script type="text/javascript" src="../../js/simple-highlight/simple-highlight.js"></script>
		<script type="text/javascript" src="http://js.tongji.linezing.com/2940294/tongji.js"></script>
	</head>
	<body">
		<div id="main">
			<div id="header">
				<div id="logo"><img src='../../img/logo.gif'></img>ie-Yu的博客</div>
				<div id="index">
					<span><a href="../../index.html">首页</a></span>
					<span><a href="../index.html"  class="index-sel">博客</a></span>
					<span><a href="../../about.html">关于</a></span>
				</div>
				<div id="self-intro">
					<div id="avatar">
						<img src="../../img/me.gif"></img>
					</div>
					<div id="intro-text">
						我是谢彧，在这里写博客<br />
						记录下学习的收获<br />
						实践有趣的想法<br />
						你可以通过<a href='http://feeds.feedburner.com/xie-yu' target="_blank"> RSS </a>获得本博客的更新<br />
						我的邮箱是：xieofyu at gmail.com
					</div>
				</div>
				<div class="clear"></div>
			</div>
			<div id="content">
				<div class="blog-view">
					<div class="blog-title-wrap">
						<div class="blog-title">
							<h1>谷歌搜索的敏感词有哪些</h1>
						</div>
						<div class="blog-title-info">
							<span class="date">2012-7-23</span>
						</div>
					</div>
					<div class="blog-content-view">
						<p>
							从今年早些时候开始，使用<a href="http://www.google.com" target="_blank">谷歌</a>搜索诸如&quot;麦当劳&quot;这样的词，<!--
							-->谷歌会提示&quot;请注意在中国大陆搜索[<em>麦当劳</em>]很可能导致用户与谷歌的连接暂时被阻断&quot;云云，<!--
							-->这样可以减少得到&quot;此网页无法显示&quot;的次数。<!--
							-->（关于这项功能的细节，见<!--
							--><a href="http://services.google.com/fh/files/blogs/google_chinasearchchinese.pdf" target="_blank">官方说明</a>）
						</p>
						<p>
							运气好的话，会发现搜索&quot;江&quot;、&quot;王&quot;这样的常见字，都属于敏感词，不免让人好奇能够让&quot;此网页无法显示&quot;的敏感词都有哪些。
						</p>
						<p>
							因为阻止用户继续搜索的提示弹出速度很快，而且断网后也能做出反应，所以推测敏感词是保存在页面代码里的。<!--
							-->直接查看页面源代码，搜寻无果，但在&quot;麦当劳&quot;页面元素附近找到一个像那么回事的函数：<code>getEncodedBlackList</code>，<!--
							-->向上找到该函数的定义，是这样的：<code>dI:function getEncodedBlacklist(){return a}</code>。接下来寻找用到dI的地方，在154和155行。<!--
							-->154行包括一个很大的二维数组，内容是一些4位或者5位的十进制数，之前的函数名称已经表明，敏感词是encode过的，<!--
							-->所以这些大概就是encode过后的敏感词吧。后面即有一段解析这些数字的代码，用的是<code>fromCharCode</code>，所以这些<!--
							-->数字就是unicode了。具体来说，还要用一个key（30303）和这些unicode码异或，之后调用fromCharCode得到敏感词原文。<!--
							-->选了几个字测试了一下，正是敏感词。
						</p>
						<p>
							接下来就好办了。不难想见要看到敏感词，只要循环解析出那个二维数组即可。为了观察方便，不妨将敏感词放进谷歌页面里展示出来。<!--
							-->下面便是最后的成果：<br />
							<pre><div id="showBlacklist">
 javascript:
 var show=document.createElement("div"),
	 body=document.getElementsByTagName("body")[0],
	 main=document.getElementById("main");
	 body.replaceChild(show, main);
 for(var b=_.K.HG(),c=b.dI(),b=b.getKey(),g=0,h;h=c[g++];){
	var w="", len=h.length;
	for(var i=0; i&lt;len; i++)
		w+=window.String.fromCharCode(h[i]^b);
	var bw=document.createElement("div");
	bw.appendChild(document.createTextNode(w));
	show.appendChild(bw)
		.setAttribute("style",
			"margin-left:10px;margin-right:10px;font-size:12px");
 }
 void 0;
							</div></pre>
							复制该段代码，粘贴到谷歌搜索首页地址栏内，按回车，敏感词就会列出来。用IE8、IE9、Chrome、FireFox测试都还可以。<!--
							-->较新的FireFox好像不支持在地址栏运行javascript，如果你遇到这种情况，请敲<code>Ctrl + Shift + K</code>，在控制台内运行<!--
							-->这段代码。
						</p>
						<p>
							除了像&quot;麦当劳&quot;这种不像敏感词的敏感词，大部分敏感词还是比较敏感的，槽点也多，贴出来没什么意义，<!--
							-->大家可以自己用这段代码试试，娱乐一下。
						</p>
						<p>
							（<span style="font-style:italic">写这篇博客又用到之前的Simple Highlight，发现bug两个……</span>）
						</p>
						<p>
							<div id="seecomments"><a href="#disqus_thread" onclick="seeComments(this)">点击添加评论<img src='../../img/comment.gif' /></a></div>
							<div id="disqus_thread"></div>
						</p>
					</div>
				</div>
			</div>
			<div id="push">
				
			</div>
		</div>
		<div id="footer">
			<div id="footer-note">
				Xie-Yu博客· github/xie-yu · design by 谢彧
			</div>
		</div>
	</body>
	<script>
		$("#showBlacklist").simpleHighlight();
	</script>
</html>